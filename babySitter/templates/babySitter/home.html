{% extends "babySitter/base.html" %}
{% block content %}
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 400px;
          width: 1100px;
      }
    </style>
  </head>
  <br/>
  {% csrf_token %}
  <div class="form-row">
      <div class="form-group col-12">
          <div class="form-row">
              <div class="form-group col-md-2">
                  <input type="number" min=0 class="form-control" id="price" placeholder="Price" name="price">
              </div>
              <div class="form-group col-md-2">
                  <input type="number" min=0 max="9" class="form-control" id="kids" placeholder="Kids" name="kids">
              </div>
              <div class="form-group col-md-2">
                  <input type="number" min=1 max="5" class="form-control" id="rating" placeholder="Rating" name="rating">
              </div>
              <div class="form-group col-md-2">
                  <input type="number" min=1 max="50" class="form-control" id="radius" placeholder="Radius" name="radius">
              </div>
              <div class="form-group col-md-5">
                  <button type="submit" class="btn btn-primary">Find a BabySitter</button>
                  {#<a href="{% url 'babySitter-details' %}" class="btn btn-outline-info">Find a BabySitter</a>#}
              </div>
              <input  id="LatTest" name="lat" hidden></input>
              <input id="LongTest" name="lng" hidden></input>
              </button>
          </div>
      </div>
      <div id="map"></div>
      <script>
          // Note: This example requires that you consent to location sharing when
          // prompted by your browser. If you see the error "The Geolocation service
          // failed.", it means you probably did not give permission for the browser to
          // locate you.
          var map, infoWindow;
          function initMap() {
              map = new google.maps.Map(document.getElementById('map'), {
                  center: {lat: -34.397, lng: 150.644},
                  zoom: 16
              });
              infoWindow = new google.maps.InfoWindow;

              // Try HTML5 geolocation.
              if (navigator.geolocation) {
                  navigator.geolocation.getCurrentPosition(function(position) {
                      var pos = {
                          lat: position.coords.latitude,
                          lng: position.coords.longitude
                      };

                      infoWindow.setPosition(pos);
                      {% if user.is_parent %}
                          infoWindow.setContent("I'm Here!");
                      {% endif %}
                      infoWindow.open(map);
                      map.setCenter(pos);
                  }, function() {
                      handleLocationError(true, infoWindow, map.getCenter());
                  });
              } else {
                  // Browser doesn't support Geolocation
                  handleLocationError(false, infoWindow, map.getCenter());
              }
          }



          function handleLocationError(browserHasGeolocation, infoWindow, pos) {
              infoWindow.setPosition(pos);
              infoWindow.setContent(browserHasGeolocation ?
                  'Error: The Geolocation service failed.' :
                  'Error: Your browser doesn\'t support geolocation.');
              infoWindow.open(map);
          }
      </script>
      <script async defer
              src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCVcAJzhMJ6r1nIitmyuOvV40Kj93f0XvM&callback=initMap">
      </script>
</html>
{% endblock content %}